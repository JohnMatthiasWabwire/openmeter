-- create index "grant_namespace" to table: "grants"
CREATE INDEX "grant_namespace" ON "grants" ("namespace");
-- create index "balancesnapshot_namespace" to table: "balance_snapshots"
CREATE INDEX "balancesnapshot_namespace" ON "balance_snapshots" ("namespace");
-- create index "billinginvoice_namespace" to table: "billing_invoices"
CREATE INDEX "billinginvoice_namespace" ON "billing_invoices" ("namespace");
-- create index "billingprofile_namespace" to table: "billing_profiles"
CREATE INDEX "billingprofile_namespace" ON "billing_profiles" ("namespace");
-- create index "billingworkflowconfig_namespace" to table: "billing_workflow_configs"
CREATE INDEX "billingworkflowconfig_namespace" ON "billing_workflow_configs" ("namespace");
-- create index "entitlement_namespace" to table: "entitlements"
CREATE INDEX "entitlement_namespace" ON "entitlements" ("namespace");
-- create index "billinginvoiceitem_namespace" to table: "billing_invoice_items"
CREATE INDEX "billinginvoiceitem_namespace" ON "billing_invoice_items" ("namespace");
-- create index "notificationchannel_namespace" to table: "notification_channels"
CREATE INDEX "notificationchannel_namespace" ON "notification_channels" ("namespace");
-- create index "notificationrule_namespace" to table: "notification_rules"
CREATE INDEX "notificationrule_namespace" ON "notification_rules" ("namespace");
-- create index "notificationevent_namespace" to table: "notification_events"
CREATE INDEX "notificationevent_namespace" ON "notification_events" ("namespace");
-- create index "notificationeventdeliverystatus_namespace" to table: "notification_event_delivery_status"
CREATE INDEX "notificationeventdeliverystatus_namespace" ON "notification_event_delivery_status" ("namespace");
-- create index "usagereset_namespace" to table: "usage_resets"
CREATE INDEX "usagereset_namespace" ON "usage_resets" ("namespace");
-- create "customers" table
CREATE TABLE "customers" (
  "id" character(26) NOT NULL,
  "key" character varying NOT NULL,
  "namespace" character varying NOT NULL,
  "metadata" jsonb NULL,
  "created_at" timestamptz NOT NULL,
  "updated_at" timestamptz NOT NULL,
  "deleted_at" timestamptz NULL,
  "name" character varying NOT NULL,
  "currency" character varying NULL,
  "tax_provider" character varying NULL,
  "invoicing_provider" character varying NULL,
  "payment_provider" character varying NULL,
  "external_mapping_stripe_customer_id" character varying NULL,
  "primary_email" character varying NULL,
  "billing_address_country" character varying NULL,
  "billing_address_postal_code" character varying NULL,
  "billing_address_state" character varying NULL,
  "billing_address_city" character varying NULL,
  "billing_address_line1" character varying NULL,
  "billing_address_line2" character varying NULL,
  "billing_address_phone_number" character varying NULL,
  PRIMARY KEY ("id")
);
-- create index "customer_id" to table: "customers"
CREATE INDEX "customer_id" ON "customers" ("id");
-- create index "customer_namespace" to table: "customers"
CREATE INDEX "customer_namespace" ON "customers" ("namespace");
-- create index "customer_namespace_id" to table: "customers"
CREATE INDEX "customer_namespace_id" ON "customers" ("namespace", "id");
-- create index "customer_namespace_key" to table: "customers"
CREATE UNIQUE INDEX "customer_namespace_key" ON "customers" ("namespace", "key");
-- create "customer_subjects" table
CREATE TABLE "customer_subjects" (
  "id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  "subject_key" character varying NOT NULL,
  "created_at" timestamptz NOT NULL,
  "customer_id" character(26) NOT NULL,
  PRIMARY KEY ("id"),
  CONSTRAINT "customer_subjects_customers_subjects" FOREIGN KEY ("customer_id") REFERENCES "customers" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION
);
-- create index "customersubjects_customer_id_subject_key" to table: "customer_subjects"
CREATE UNIQUE INDEX "customersubjects_customer_id_subject_key" ON "customer_subjects" ("customer_id", "subject_key");
